{
  "timestamp": "2026-02-09T07:35:19.429891",
  "system": {
    "hostname": "is-vmv3-medium",
    "kernel": "6.8.0-94-generic",
    "os": "Ubuntu 24.04.1 LTS",
    "arch": "x86_64",
    "uptime": "07:35:19 up  5:00,  3 users,  load average: 1.00, 1.01, 1.07",
    "load_average": "1.00, 1.01, 1.07"
  },
  "memory": {
    "total_bytes": 16722550784,
    "used_bytes": 976470016,
    "free_bytes": 14051364864,
    "available_bytes": 15746080768
  },
  "disk": [
    {
      "source": "/dev/mapper/hk-root",
      "fstype": "ext4",
      "size_bytes": 167933390848,
      "used_bytes": 15524093952,
      "available_bytes": 145436594176,
      "percent_used": 10,
      "mount_point": "/"
    },
    {
      "source": "/dev/sda1",
      "fstype": "ext4",
      "size_bytes": 1036431360,
      "used_bytes": 245501952,
      "available_bytes": 720519168,
      "percent_used": 26,
      "mount_point": "/boot"
    }
  ],
  "ports": [
    {
      "port": 53,
      "address": "127.0.0.53%lo",
      "process": "systemd-resolve",
      "pid": 775
    },
    {
      "port": 443,
      "address": "0.0.0.0",
      "process": "nginx",
      "pid": 31786
    },
    {
      "port": 80,
      "address": "0.0.0.0",
      "process": "nginx",
      "pid": 31786
    },
    {
      "port": 3000,
      "address": "0.0.0.0",
      "process": "unknown",
      "pid": 0
    },
    {
      "port": 3001,
      "address": "0.0.0.0",
      "process": "unknown",
      "pid": 0
    },
    {
      "port": 5432,
      "address": "0.0.0.0",
      "process": "postgres",
      "pid": 855
    },
    {
      "port": 53,
      "address": "127.0.0.54",
      "process": "systemd-resolve",
      "pid": 775
    },
    {
      "port": 443,
      "address": "[::]",
      "process": "nginx",
      "pid": 31786
    },
    {
      "port": 22,
      "address": "*",
      "process": "sshd",
      "pid": 1119
    },
    {
      "port": 80,
      "address": "[::]",
      "process": "nginx",
      "pid": 31786
    },
    {
      "port": 4000,
      "address": "*",
      "process": "unknown",
      "pid": 0
    },
    {
      "port": 3105,
      "address": "*",
      "process": "unknown",
      "pid": 0
    },
    {
      "port": 5432,
      "address": "[::]",
      "process": "postgres",
      "pid": 855
    }
  ],
  "pm2": [
    {
      "name": "niteride-backend",
      "pid": 31818,
      "status": "online",
      "memory": 86253568,
      "cpu": 0,
      "restarts": 0,
      "port": 3000
    },
    {
      "name": "guide-service",
      "pid": 31819,
      "status": "online",
      "memory": 75661312,
      "cpu": 0,
      "restarts": 0,
      "port": 3105
    },
    {
      "name": "identity-service",
      "pid": 31832,
      "status": "online",
      "memory": 97832960,
      "cpu": 0,
      "restarts": 0,
      "port": 3001
    },
    {
      "name": "chat-service",
      "pid": 31833,
      "status": "online",
      "memory": 101130240,
      "cpu": 0,
      "restarts": 0,
      "port": 4000
    }
  ],
  "docker_containers": [],
  "docker_compose": [],
  "systemd": [
    {
      "unit": "chrony.service",
      "load": "loaded",
      "active": "active",
      "sub": "running"
    },
    {
      "unit": "containerd.service",
      "load": "loaded",
      "active": "active",
      "sub": "running"
    },
    {
      "unit": "dbus.service",
      "load": "loaded",
      "active": "active",
      "sub": "running"
    },
    {
      "unit": "docker.service",
      "load": "loaded",
      "active": "active",
      "sub": "running"
    },
    {
      "unit": "getty@tty1.service",
      "load": "loaded",
      "active": "active",
      "sub": "running"
    },
    {
      "unit": "multipathd.service",
      "load": "loaded",
      "active": "active",
      "sub": "running"
    },
    {
      "unit": "networkd-dispatcher.service",
      "load": "loaded",
      "active": "active",
      "sub": "running"
    },
    {
      "unit": "nginx.service",
      "load": "loaded",
      "active": "active",
      "sub": "running"
    },
    {
      "unit": "pm2-root.service",
      "load": "loaded",
      "active": "active",
      "sub": "running"
    },
    {
      "unit": "polkit.service",
      "load": "loaded",
      "active": "active",
      "sub": "running"
    },
    {
      "unit": "postgresql@16-main.service",
      "load": "loaded",
      "active": "active",
      "sub": "running"
    },
    {
      "unit": "ssh.service",
      "load": "loaded",
      "active": "active",
      "sub": "running"
    },
    {
      "unit": "systemd-journald.service",
      "load": "loaded",
      "active": "active",
      "sub": "running"
    },
    {
      "unit": "systemd-logind.service",
      "load": "loaded",
      "active": "active",
      "sub": "running"
    },
    {
      "unit": "systemd-networkd.service",
      "load": "loaded",
      "active": "active",
      "sub": "running"
    },
    {
      "unit": "systemd-resolved.service",
      "load": "loaded",
      "active": "active",
      "sub": "running"
    },
    {
      "unit": "systemd-udevd.service",
      "load": "loaded",
      "active": "active",
      "sub": "running"
    },
    {
      "unit": "unattended-upgrades.service",
      "load": "loaded",
      "active": "active",
      "sub": "running"
    },
    {
      "unit": "user@0.service",
      "load": "loaded",
      "active": "active",
      "sub": "running"
    }
  ],
  "nginx": {
    "installed": true,
    "version": "1.24.0 (Ubuntu)",
    "server_blocks": [
      {
        "listen": [
          "443 ssl http2"
        ],
        "server_name": [
          "api.niteride.fm"
        ],
        "locations": [
          {
            "path": "~ ^/api/v1/(auth|users|grid)",
            "proxy_pass": "http://127.0.0.1:3001",
            "type": "proxy"
          },
          {
            "path": "~ ^/api/v1/(admin|library|schedule|commercials|primetime|programs|obs-servers|settings|system|diagnostics|stingers|stinger-pairs|shows|channels)",
            "proxy_pass": "http://194.247.182.249:3002",
            "type": "proxy"
          },
          {
            "path": "~ ^/api/v1/guide/",
            "proxy_pass": "http://127.0.0.1:3105",
            "type": "proxy"
          },
          {
            "path": "~ ^/api/v1/chat(/|$)",
            "proxy_pass": "http://127.0.0.1:4000",
            "type": "proxy"
          },
          {
            "path": "~ ^/api/v1",
            "proxy_pass": "http://127.0.0.1:3000",
            "type": "proxy"
          }
        ]
      },
      {
        "listen": [
          "80"
        ],
        "server_name": [
          "api.niteride.fm"
        ],
        "locations": []
      },
      {
        "listen": [
          "80 default_server"
        ],
        "server_name": [
          "cdn.niteride.fm",
          "_"
        ],
        "locations": [
          {
            "path": "/.well-known/acme-challenge/",
            "proxy_pass": null,
            "type": "static"
          },
          {
            "path": "/stream/",
            "proxy_pass": "http://localhost:9050/",
            "type": "proxy"
          }
        ]
      },
      {
        "listen": [
          "80",
          "[::]:80"
        ],
        "server_name": [
          "grid.niteride.fm"
        ],
        "locations": []
      },
      {
        "listen": [
          "443 ssl http2",
          "[::]:443 ssl http2"
        ],
        "server_name": [
          "grid.niteride.fm"
        ],
        "locations": [
          {
            "path": "/",
            "proxy_pass": "http://82.22.53.68:8536",
            "type": "proxy"
          }
        ]
      },
      {
        "listen": [
          "443 ssl http2"
        ],
        "server_name": [
          "niteride.fm"
        ],
        "locations": [
          {
            "path": "~ ^/api/v1/(auth|users|grid|identity|audit|billing|invite|show-overrides)",
            "proxy_pass": "http://127.0.0.1:3001",
            "type": "proxy"
          },
          {
            "path": "~ ^/api/v1/storage(/.*)?$",
            "proxy_pass": "https://194.247.182.249",
            "type": "proxy"
          },
          {
            "path": "~ ^/api/v1/(admin|library|schedule|commercials|primetime|programs|obs-servers|settings|system|diagnostics|stingers|stinger-pairs|shows|channels|transcoding-queue)",
            "proxy_pass": "http://194.247.182.249:3002",
            "type": "proxy"
          },
          {
            "path": "~ ^/api/v1/(guide/.*)$",
            "proxy_pass": "http://127.0.0.1:3105/$1",
            "type": "proxy"
          },
          {
            "path": "~ ^/api/v1/chat(/|$)",
            "proxy_pass": "http://127.0.0.1:4000",
            "type": "proxy"
          },
          {
            "path": "~ ^/api/v1",
            "proxy_pass": "http://127.0.0.1:3000",
            "type": "proxy"
          },
          {
            "path": "/socket.io/",
            "proxy_pass": "http://127.0.0.1:4000/socket.io/",
            "type": "proxy"
          },
          {
            "path": "/grid-api/",
            "proxy_pass": "http://82.22.53.68:1236/",
            "type": "proxy"
          },
          {
            "path": "/grid/socket.io/",
            "proxy_pass": "http://82.22.53.68:1236/socket.io/",
            "type": "proxy"
          },
          {
            "path": "/grafana/",
            "proxy_pass": "http://194.247.182.159:3000",
            "type": "proxy"
          },
          {
            "path": "= /index.html",
            "proxy_pass": null,
            "type": "static"
          },
          {
            "path": "~ \"\\.[a-f0-9]\\{8,\\}\\.(js|css)$\"",
            "proxy_pass": null,
            "type": "static"
          },
          {
            "path": "~* \\.(png|jpg|jpeg|gif|ico|svg|webp|woff|woff2|ttf|eot)$",
            "proxy_pass": null,
            "type": "static"
          }
        ]
      },
      {
        "listen": [
          "80"
        ],
        "server_name": [
          "niteride.fm",
          "www.niteride.fm"
        ],
        "locations": []
      },
      {
        "listen": [
          "443 ssl http2"
        ],
        "server_name": [
          "www.niteride.fm"
        ],
        "locations": []
      },
      {
        "listen": [
          "443 ssl http2"
        ],
        "server_name": [
          "niteride.fm"
        ],
        "locations": [
          {
            "path": "~ ^/api/v1/(auth|users|grid|identity|audit|billing|invite)",
            "proxy_pass": "http://127.0.0.1:3001",
            "type": "proxy"
          },
          {
            "path": "~ ^/api/v1/(admin|library|schedule|commercials|primetime|programs|obs-servers|settings|system|diagnostics|stingers|stinger-pairs|shows|channels)",
            "proxy_pass": "http://194.247.182.249:3002",
            "type": "proxy"
          },
          {
            "path": "~ ^/api/v1/(guide/.*)$",
            "proxy_pass": "http://127.0.0.1:3105/$1",
            "type": "proxy"
          },
          {
            "path": "~ ^/api/v1",
            "proxy_pass": "http://127.0.0.1:3000",
            "type": "proxy"
          },
          {
            "path": "/socket.io/",
            "proxy_pass": "http://localhost:3000/socket.io/",
            "type": "proxy"
          },
          {
            "path": "/grid-api/",
            "proxy_pass": "http://82.22.53.68:1236/",
            "type": "proxy"
          },
          {
            "path": "/grid/socket.io/",
            "proxy_pass": "http://82.22.53.68:1236/socket.io/",
            "type": "proxy"
          },
          {
            "path": "/grafana/",
            "proxy_pass": "http://194.247.182.159:3000",
            "type": "proxy"
          },
          {
            "path": "= /index.html",
            "proxy_pass": null,
            "type": "static"
          },
          {
            "path": "~ \"\\.[a-f0-9]\\{8,\\}\\.(js|css)$\"",
            "proxy_pass": null,
            "type": "static"
          },
          {
            "path": "~* \\.(png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$",
            "proxy_pass": null,
            "type": "static"
          }
        ]
      },
      {
        "listen": [
          "80"
        ],
        "server_name": [
          "niteride.fm",
          "www.niteride.fm"
        ],
        "locations": []
      },
      {
        "listen": [
          "443 ssl http2"
        ],
        "server_name": [
          "www.niteride.fm"
        ],
        "locations": []
      },
      {
        "listen": [
          "443 ssl http2"
        ],
        "server_name": [
          "niteride.fm"
        ],
        "locations": [
          {
            "path": "~ ^/api/v1/(auth|users|grid|identity|audit|billing|invite|show-overrides)",
            "proxy_pass": "http://127.0.0.1:3001",
            "type": "proxy"
          },
          {
            "path": "~ ^/api/v1/(admin|library|schedule|commercials|primetime|programs|obs-servers|settings|system|diagnostics|stingers|stinger-pairs|shows|channels|transcoding-queue)",
            "proxy_pass": "http://194.247.182.249:3002",
            "type": "proxy"
          },
          {
            "path": "~ ^/api/v1/(guide/.*)$",
            "proxy_pass": "http://127.0.0.1:3105/$1",
            "type": "proxy"
          },
          {
            "path": "~ ^/api/v1/chat(/|$)",
            "proxy_pass": "http://127.0.0.1:4000",
            "type": "proxy"
          },
          {
            "path": "~ ^/api/v1",
            "proxy_pass": "http://127.0.0.1:3000",
            "type": "proxy"
          },
          {
            "path": "/socket.io/",
            "proxy_pass": "http://127.0.0.1:4000/socket.io/",
            "type": "proxy"
          },
          {
            "path": "/grid-api/",
            "proxy_pass": "http://82.22.53.68:1236/",
            "type": "proxy"
          },
          {
            "path": "/grid/socket.io/",
            "proxy_pass": "http://82.22.53.68:1236/socket.io/",
            "type": "proxy"
          },
          {
            "path": "/grafana/",
            "proxy_pass": "http://194.247.182.159:3000",
            "type": "proxy"
          },
          {
            "path": "= /index.html",
            "proxy_pass": null,
            "type": "static"
          },
          {
            "path": "~ \"\\.[a-f0-9]\\{8,\\}\\.(js|css)$\"",
            "proxy_pass": null,
            "type": "static"
          },
          {
            "path": "~* \\.(png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$",
            "proxy_pass": null,
            "type": "static"
          }
        ]
      },
      {
        "listen": [
          "80"
        ],
        "server_name": [
          "niteride.fm",
          "www.niteride.fm"
        ],
        "locations": []
      },
      {
        "listen": [
          "443 ssl http2"
        ],
        "server_name": [
          "www.niteride.fm"
        ],
        "locations": []
      }
    ],
    "proxy_destinations": [
      "http://127.0.0.1:3105",
      "http://localhost:9050/",
      "https://194.247.182.249",
      "http://194.247.182.249:3002",
      "http://82.22.53.68:8536",
      "http://127.0.0.1:3000",
      "http://127.0.0.1:3105/$1",
      "http://82.22.53.68:1236/socket.io/",
      "http://127.0.0.1:4000",
      "http://82.22.53.68:1236/",
      "http://127.0.0.1:4000/socket.io/",
      "http://194.247.182.159:3000",
      "http://127.0.0.1:3001",
      "http://localhost:3000/socket.io/"
    ],
    "config_preview": "# configuration file /etc/nginx/nginx.conf:\nuser www-data;\nworker_processes auto;\npid /run/nginx.pid;\ninclude /etc/nginx/modules-enabled/*.conf;\n\nevents {\n    worker_connections 768;\n}\n\nhttp {\n    client_body_buffer_size 10M;\n    # Global large upload settings\n    client_body_timeout 1800s;\n    # HTTP/2 settings for large uploads\n    http2_body_preread_size 256k;\n    http2_recv_buffer_size 4m;\n    http2_chunk_size 16k;\n    \n    client_header_timeout 1800s;\n    lingering_timeout 1800s;\n    lingering_time 1800s;\n    send_timeout 1800s;\n    client_max_body_size 10G;\n    sendfile on;\n    tcp_nopush on;\n    tcp_nodelay on;\n    keepalive_timeout 1800s;\n    types_hash_max_size 2048;\n\n    include /etc/nginx/mime.types;\n    default_type application/octet-stream;\n\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_prefer_server_ciphers on;\n\n    access_log /var/log/nginx/access.log;\n    error_log /var/log/nginx/error.log;\n\n    gzip on;\n\n    include /etc/nginx/conf.d/*.conf;\n    include /etc/nginx/sites-enabled/*;\n}\n\n# configuration file /etc/nginx/mime.types:\n\ntypes {\n    text/html                                        html htm shtml;\n    text/css                                         css;\n    text/xml                                         xml;\n    image/gif                                        gif;\n    image/jpeg                                       jpeg jpg;\n    application/javascript                           js;\n    application/atom+xml                             atom;\n    application/rss+xml                              rss;\n\n    text/mathml                                      mml;\n    text/plain                                       txt;\n    text/vnd.sun.j2me.app-descriptor                 jad;\n    text/vnd.wap.wml                                 wml;\n    text/x-component                                 htc;\n\n    image/avif                                       avif;\n    image/png                                        png;\n    image/svg+xml                                    svg svgz;\n    image/tiff                                       tif tiff;\n    image/vnd.wap.wbmp                               wbmp;\n    image/webp                                       webp;\n    image/x-icon                                     ico;\n    image/x-jng                                      jng;\n    image/x-ms-bmp                                   bmp;\n\n    font/woff                                        woff;\n    font/woff2                                       woff2;\n\n    application/java-archive                         jar war ear;\n    application/json                                 json;\n    application/mac-binhex40                         hqx;\n    application/msword                               doc;\n    application/pdf                                  pdf;\n    application/postscript                           ps eps ai;\n    application/rtf                                  rtf;\n    application/vnd.apple.mpegurl                    m3u8;\n    application/vnd.google"
  },
  "cron": {
    "user_crontab": "",
    "system_cron_files": [
      "certbot",
      "e2scrub_all",
      "sysstat"
    ]
  },
  "env": {
    "env_file": "/opt/niteride/.env",
    "variables": {
      "DATABASE_URL": "postgresql://postgres:xK8nP2vQm7R4wL9sT6yF3jH5bN1cV0zA@localhost:5432/niteride_db",
      "DB_HOST": "localhost",
      "DB_PORT": "5432",
      "DB_NAME": "niteride_db",
      "DB_USER": "postgres",
      "DB_PASSWORD": "[REDACTED]",
      "DATABASE_POOL_MIN": "2",
      "DATABASE_POOL_MAX": "10",
      "DATABASE_IDLE_TIMEOUT": "10000",
      "DATABASE_CONNECTION_TIMEOUT": "5000",
      "PORT": "3000",
      "NODE_ENV": "production",
      "LIBRARY_PATH": "/opt/niteride/library",
      "JWT_SECRET": "[REDACTED]",
      "JWT_EXPIRES_IN": "7d",
      "SCHEDULE_CRON": "55 23 * * *",
      "FFMPEG_VOD_URL": "http://localhost:9020",
      "ENABLE_COMMERCIAL_BREAKS": "true",
      "ENABLE_RUNTIME_COMMERCIAL_SELECTION": "true",
      "ENABLE_FREQUENCY_CONTROLS": "true",
      "LOG_LEVEL": "info",
      "LOG_FILE": "/opt/niteride/logs/backend.log",
      "FRONTEND_URL": "http://194.247.182.249",
      "CORS_ORIGIN": "http://194.247.182.249,http://localhost:5173,https://niteride.fm,https://www.niteride.fm,https://admin.niteride.fm,https://stream.niteride.fm,https://api.niteride.fm,https://profile.niteride.fm",
      "SUPABASE_JWT_SECRET": "[REDACTED]",
      "SUPABASE_URL": "https://wykeftshdxlkamgvytbc.supabase.co",
      "SUPABASE_ANON_KEY": "[REDACTED]",
      "STRIPE_SECRET_KEY": "[REDACTED]",
      "STRIPE_PUBLISHABLE_KEY": "[REDACTED]",
      "STRIPE_WEBHOOK_SECRET": "[REDACTED]",
      "STRIPE_PRICE_ID": "prod_TCbPRjHrVx5uNB",
      "UPLOAD_DIR": "/opt/niteride/uploads",
      "MAX_FILE_SIZE": "5368709120",
      "OBS_API_URL": "http://localhost:4455",
      "OBS_API_KEY": "[REDACTED]",
      "RATE_LIMIT_WINDOW_MS": "900000",
      "RATE_LIMIT_MAX_REQUESTS": "100",
      "STREAM_SERVER_URL": "http://194.247.182.249:3100",
      "SERVICE_KEY": "[REDACTED]",
      "REDIS_URL": "redis://:xK8nP2vQm7R4wL9sT6yF3jH5bN1cV0zA@194.247.182.249:6379",
      "GUIDE_DATABASE_URL": "postgresql://postgres:xK8nP2vQm7R4wL9sT6yF3jH5bN1cV0zA@194.247.182.249:5432/niteridefm_dev",
      "GRID_DATABASE_URL": "postgresql://lemmy:hJFjld8TCfQvOSPHze1eD4vEnG370MXsfQmU94x6hA0@82.22.53.68:5433/lemmy",
      "WEBHOOK_SECRET": "[REDACTED]",
      "ENABLE_GRID_ADMIN_SYNC": "true",
      "DISABLE_STREAMING_CORE": "true",
      "SUPABASE_SERVICE_ROLE_KEY": "[REDACTED]"
    }
  },
  "connections": [
    {
      "from": "niteride-backend",
      "to": "postgres",
      "port": 5432,
      "type": "data"
    },
    {
      "from": "guide-service",
      "to": "postgres",
      "port": 5432,
      "type": "data"
    },
    {
      "from": "identity-service",
      "to": "postgres",
      "port": 5432,
      "type": "data"
    },
    {
      "from": "chat-service",
      "to": "postgres",
      "port": 5432,
      "type": "data"
    },
    {
      "from": "niteride-backend",
      "to": "postgres",
      "port": 5432,
      "type": "data"
    },
    {
      "from": "guide-service",
      "to": "postgres",
      "port": 5432,
      "type": "data"
    },
    {
      "from": "identity-service",
      "to": "postgres",
      "port": 5432,
      "type": "data"
    },
    {
      "from": "chat-service",
      "to": "postgres",
      "port": 5432,
      "type": "data"
    },
    {
      "from": "nginx",
      "to": "http://127.0.0.1:3105",
      "port": 3105,
      "type": "proxy"
    },
    {
      "from": "nginx",
      "to": "http://localhost:9050/",
      "port": 9050,
      "type": "proxy"
    },
    {
      "from": "nginx",
      "to": "https://194.247.182.249",
      "port": 80,
      "type": "proxy"
    },
    {
      "from": "nginx",
      "to": "http://194.247.182.249:3002",
      "port": 3002,
      "type": "proxy"
    },
    {
      "from": "nginx",
      "to": "http://82.22.53.68:8536",
      "port": 8536,
      "type": "proxy"
    },
    {
      "from": "nginx",
      "to": "http://127.0.0.1:3000",
      "port": 3000,
      "type": "proxy"
    },
    {
      "from": "nginx",
      "to": "http://127.0.0.1:3105/$1",
      "port": 3105,
      "type": "proxy"
    },
    {
      "from": "nginx",
      "to": "http://82.22.53.68:1236/socket.io/",
      "port": 1236,
      "type": "proxy"
    },
    {
      "from": "nginx",
      "to": "http://127.0.0.1:4000",
      "port": 4000,
      "type": "proxy"
    },
    {
      "from": "nginx",
      "to": "http://82.22.53.68:1236/",
      "port": 1236,
      "type": "proxy"
    },
    {
      "from": "nginx",
      "to": "http://127.0.0.1:4000/socket.io/",
      "port": 4000,
      "type": "proxy"
    },
    {
      "from": "nginx",
      "to": "http://194.247.182.159:3000",
      "port": 3000,
      "type": "proxy"
    },
    {
      "from": "nginx",
      "to": "http://127.0.0.1:3001",
      "port": 3001,
      "type": "proxy"
    },
    {
      "from": "nginx",
      "to": "http://localhost:3000/socket.io/",
      "port": 3000,
      "type": "proxy"
    }
  ],
  "external_services": [
    {
      "name": "Supabase",
      "type": "auth/database",
      "detected_in": ".env"
    },
    {
      "name": "Stripe",
      "type": "payments",
      "detected_in": ".env"
    }
  ]
}
