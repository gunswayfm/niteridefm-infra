{
  "timestamp": "2026-02-22T03:09:37.500337",
  "system": {
    "hostname": "niteride-fe-ppe",
    "kernel": "6.8.0-39-generic",
    "os": "Ubuntu 24.04.1 LTS",
    "arch": "x86_64",
    "uptime": "03:09:37 up 10 days, 20:06,  2 users,  load average: 0.01, 0.01, 0.00",
    "load_average": "0.01, 0.01, 0.00"
  },
  "memory": {
    "total_bytes": 6189211648,
    "used_bytes": 879333376,
    "free_bytes": 1931104256,
    "available_bytes": 5309878272
  },
  "disk": [
    {
      "source": "/dev/mapper/hk-root",
      "fstype": "ext4",
      "size_bytes": 125652185088,
      "used_bytes": 7084331008,
      "available_bytes": 113313095680,
      "percent_used": 6,
      "mount_point": "/"
    },
    {
      "source": "/dev/sda1",
      "fstype": "ext4",
      "size_bytes": 1036431360,
      "used_bytes": 245481472,
      "available_bytes": 720539648,
      "percent_used": 26,
      "mount_point": "/boot"
    }
  ],
  "ports": [
    {
      "port": 53,
      "address": "127.0.0.53%lo",
      "process": "systemd-resolve",
      "pid": 55631
    },
    {
      "port": 3001,
      "address": "0.0.0.0",
      "process": "unknown",
      "pid": 0
    },
    {
      "port": 3000,
      "address": "0.0.0.0",
      "process": "unknown",
      "pid": 0
    },
    {
      "port": 6379,
      "address": "127.0.0.1",
      "process": "redis-server",
      "pid": 50466
    },
    {
      "port": 5432,
      "address": "0.0.0.0",
      "process": "postgres",
      "pid": 399946
    },
    {
      "port": 443,
      "address": "0.0.0.0",
      "process": "nginx",
      "pid": 681699
    },
    {
      "port": 53,
      "address": "127.0.0.54",
      "process": "systemd-resolve",
      "pid": 55631
    },
    {
      "port": 80,
      "address": "0.0.0.0",
      "process": "nginx",
      "pid": 681699
    },
    {
      "port": 4000,
      "address": "*",
      "process": "unknown",
      "pid": 0
    },
    {
      "port": 3105,
      "address": "*",
      "process": "unknown",
      "pid": 0
    },
    {
      "port": 5432,
      "address": "[::]",
      "process": "postgres",
      "pid": 399946
    },
    {
      "port": 6379,
      "address": "[::1]",
      "process": "redis-server",
      "pid": 50466
    },
    {
      "port": 22,
      "address": "*",
      "process": "sshd",
      "pid": 55624
    }
  ],
  "pm2": [
    {
      "name": "niteride-backend",
      "pid": 681713,
      "status": "online",
      "memory": 88559616,
      "cpu": 0,
      "restarts": 3,
      "port": 3000
    },
    {
      "name": "guide-service",
      "pid": 681714,
      "status": "online",
      "memory": 72822784,
      "cpu": 0,
      "restarts": 3,
      "port": 3105
    },
    {
      "name": "identity-service",
      "pid": 681727,
      "status": "online",
      "memory": 94199808,
      "cpu": 0,
      "restarts": 15,
      "port": 3001
    },
    {
      "name": "chat-service",
      "pid": 681728,
      "status": "online",
      "memory": 86663168,
      "cpu": 0,
      "restarts": 3,
      "port": 4000
    }
  ],
  "docker_containers": [],
  "docker_compose": [],
  "systemd": [
    {
      "unit": "chrony.service",
      "load": "loaded",
      "active": "active",
      "sub": "running"
    },
    {
      "unit": "containerd.service",
      "load": "loaded",
      "active": "active",
      "sub": "running"
    },
    {
      "unit": "dbus.service",
      "load": "loaded",
      "active": "active",
      "sub": "running"
    },
    {
      "unit": "docker.service",
      "load": "loaded",
      "active": "active",
      "sub": "running"
    },
    {
      "unit": "getty@tty1.service",
      "load": "loaded",
      "active": "active",
      "sub": "running"
    },
    {
      "unit": "multipathd.service",
      "load": "loaded",
      "active": "active",
      "sub": "running"
    },
    {
      "unit": "networkd-dispatcher.service",
      "load": "loaded",
      "active": "active",
      "sub": "running"
    },
    {
      "unit": "nginx.service",
      "load": "loaded",
      "active": "active",
      "sub": "running"
    },
    {
      "unit": "polkit.service",
      "load": "loaded",
      "active": "active",
      "sub": "running"
    },
    {
      "unit": "postgresql@16-main.service",
      "load": "loaded",
      "active": "active",
      "sub": "running"
    },
    {
      "unit": "redis-server.service",
      "load": "loaded",
      "active": "active",
      "sub": "running"
    },
    {
      "unit": "ssh.service",
      "load": "loaded",
      "active": "active",
      "sub": "running"
    },
    {
      "unit": "systemd-journald.service",
      "load": "loaded",
      "active": "active",
      "sub": "running"
    },
    {
      "unit": "systemd-logind.service",
      "load": "loaded",
      "active": "active",
      "sub": "running"
    },
    {
      "unit": "systemd-networkd.service",
      "load": "loaded",
      "active": "active",
      "sub": "running"
    },
    {
      "unit": "systemd-resolved.service",
      "load": "loaded",
      "active": "active",
      "sub": "running"
    },
    {
      "unit": "systemd-udevd.service",
      "load": "loaded",
      "active": "active",
      "sub": "running"
    },
    {
      "unit": "unattended-upgrades.service",
      "load": "loaded",
      "active": "active",
      "sub": "running"
    },
    {
      "unit": "user@0.service",
      "load": "loaded",
      "active": "active",
      "sub": "running"
    }
  ],
  "nginx": {
    "installed": true,
    "version": "1.24.0 (Ubuntu)",
    "server_blocks": [
      {
        "listen": [],
        "server_name": [
          "ppe.niteride.fm",
          "82.22.53.147"
        ],
        "locations": [
          {
            "path": "~ ^/api/v1/(admin|library|library-sync|library-import|library-assign|schedule|commercials|primetime|programs|obs-servers|settings|system|diagnostics|stinger-pairs|stingers|shows|channels|live|transcoding-queue)(/|$)",
            "proxy_pass": "http://82.22.53.161:3002",
            "type": "proxy"
          },
          {
            "path": "~ ^/api/v1/storage(/.*)?$",
            "proxy_pass": "https://api-ppe.niteride.fm",
            "type": "proxy"
          },
          {
            "path": "/uploads/",
            "proxy_pass": "https://api-ppe.niteride.fm/uploads/",
            "type": "proxy"
          },
          {
            "path": "/hls/",
            "proxy_pass": "https://api-ppe.niteride.fm/hls/",
            "type": "proxy"
          },
          {
            "path": "/ch1/",
            "proxy_pass": "https://api-ppe.niteride.fm/ch1/",
            "type": "proxy"
          },
          {
            "path": "/stream/ch1/",
            "proxy_pass": "https://api-ppe.niteride.fm/ch1/",
            "type": "proxy"
          },
          {
            "path": "/ch2/",
            "proxy_pass": "https://api-ppe.niteride.fm/ch2/",
            "type": "proxy"
          },
          {
            "path": "/stream/ch2/",
            "proxy_pass": "https://api-ppe.niteride.fm/ch2/",
            "type": "proxy"
          },
          {
            "path": "/ch2-segments/",
            "proxy_pass": "https://api-ppe.niteride.fm/ch2-segments/",
            "type": "proxy"
          },
          {
            "path": "/segments/",
            "proxy_pass": "https://api-ppe.niteride.fm/hls/segments/",
            "type": "proxy"
          },
          {
            "path": "~ ^/api/v1/(auth|users|grid|identity|audit|billing|invite|show-overrides)",
            "proxy_pass": "http://127.0.0.1:3001",
            "type": "proxy"
          },
          {
            "path": "~ ^/api/v1/(guide/.*)$",
            "proxy_pass": "http://127.0.0.1:3105/$1",
            "type": "proxy"
          },
          {
            "path": "~ ^/api/v1/chat(/|$)",
            "proxy_pass": "http://127.0.0.1:4000",
            "type": "proxy"
          },
          {
            "path": "~ ^/api/v1",
            "proxy_pass": "http://127.0.0.1:3000",
            "type": "proxy"
          },
          {
            "path": "/socket.io/",
            "proxy_pass": "http://127.0.0.1:4000/socket.io/",
            "type": "proxy"
          },
          {
            "path": "= /index.html",
            "proxy_pass": null,
            "type": "static"
          },
          {
            "path": "~* \\.(js|css)$",
            "proxy_pass": null,
            "type": "static"
          },
          {
            "path": "~* \\.(png|jpg|jpeg|gif|ico|svg|webp|woff|woff2|ttf|eot)$",
            "proxy_pass": null,
            "type": "static"
          }
        ]
      },
      {
        "listen": [
          "80"
        ],
        "server_name": [
          "ppe.niteride.fm",
          "82.22.53.147"
        ],
        "locations": []
      },
      {
        "listen": [],
        "server_name": [
          "ppe.niteride.fm",
          "82.22.53.147"
        ],
        "locations": [
          {
            "path": "~ ^/api/v1/(admin|library|library-sync|library-import|library-assign|schedule|commercials|primetime|programs|obs-servers|settings|system|diagnostics|stinger-pairs|stingers|shows|channels|live|transcoding-queue)(/|$)",
            "proxy_pass": "http://82.22.53.161:3002",
            "type": "proxy"
          },
          {
            "path": "~ ^/api/v1/storage(/.*)?$",
            "proxy_pass": "https://api-ppe.niteride.fm",
            "type": "proxy"
          },
          {
            "path": "/uploads/",
            "proxy_pass": "https://api-ppe.niteride.fm/uploads/",
            "type": "proxy"
          },
          {
            "path": "/hls/",
            "proxy_pass": "https://api-ppe.niteride.fm/hls/",
            "type": "proxy"
          },
          {
            "path": "/ch1/",
            "proxy_pass": "https://api-ppe.niteride.fm/ch1/",
            "type": "proxy"
          },
          {
            "path": "/stream/ch1/",
            "proxy_pass": "https://api-ppe.niteride.fm/ch1/",
            "type": "proxy"
          },
          {
            "path": "/segments/",
            "proxy_pass": "https://api-ppe.niteride.fm/hls/segments/",
            "type": "proxy"
          },
          {
            "path": "~ ^/api/v1/(auth|users|grid|identity|audit|billing|invite|show-overrides)",
            "proxy_pass": "http://127.0.0.1:3001",
            "type": "proxy"
          },
          {
            "path": "~ ^/api/v1/(guide/.*)$",
            "proxy_pass": "http://127.0.0.1:3105/$1",
            "type": "proxy"
          },
          {
            "path": "~ ^/api/v1/chat(/|$)",
            "proxy_pass": "http://127.0.0.1:4000",
            "type": "proxy"
          },
          {
            "path": "~ ^/api/v1",
            "proxy_pass": "http://127.0.0.1:3000",
            "type": "proxy"
          },
          {
            "path": "/socket.io/",
            "proxy_pass": "http://127.0.0.1:4000/socket.io/",
            "type": "proxy"
          },
          {
            "path": "= /index.html",
            "proxy_pass": null,
            "type": "static"
          },
          {
            "path": "~* \\.(js|css)$",
            "proxy_pass": null,
            "type": "static"
          },
          {
            "path": "~* \\.(png|jpg|jpeg|gif|ico|svg|webp|woff|woff2|ttf|eot)$",
            "proxy_pass": null,
            "type": "static"
          }
        ]
      },
      {
        "listen": [
          "80"
        ],
        "server_name": [
          "ppe.niteride.fm",
          "82.22.53.147"
        ],
        "locations": []
      }
    ],
    "proxy_destinations": [
      "https://api-ppe.niteride.fm/ch2/",
      "https://api-ppe.niteride.fm/ch2-segments/",
      "https://api-ppe.niteride.fm/hls/",
      "http://82.22.53.161:3002",
      "https://api-ppe.niteride.fm/hls/segments/",
      "http://127.0.0.1:3001",
      "https://api-ppe.niteride.fm/uploads/",
      "http://127.0.0.1:3105/$1",
      "https://api-ppe.niteride.fm",
      "http://127.0.0.1:4000/socket.io/",
      "http://127.0.0.1:3000",
      "http://127.0.0.1:4000",
      "https://api-ppe.niteride.fm/ch1/"
    ],
    "config_preview": "# configuration file /etc/nginx/nginx.conf:\nuser www-data;\nworker_processes auto;\npid /run/nginx.pid;\nerror_log /var/log/nginx/error.log;\ninclude /etc/nginx/modules-enabled/*.conf;\n\nevents {\n\tworker_connections 768;\n\t# multi_accept on;\n}\n\nhttp {\n\n\t##\n\t# Basic Settings\n\t##\n\n\tsendfile on;\n\ttcp_nopush on;\n\ttypes_hash_max_size 2048;\n\t# server_tokens off;\n\n\t# server_names_hash_bucket_size 64;\n\t# server_name_in_redirect off;\n\n\tinclude /etc/nginx/mime.types;\n\tdefault_type application/octet-stream;\n\n\t##\n\t# SSL Settings\n\t##\n\n\tssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3; # Dropping SSLv3, ref: POODLE\n\tssl_prefer_server_ciphers on;\n\n\t##\n\t# Logging Settings\n\t##\n\n\taccess_log /var/log/nginx/access.log;\n\n\t##\n\t# Gzip Settings\n\t##\n\n\tgzip on;\n\n\t# gzip_vary on;\n\t# gzip_proxied any;\n\t# gzip_comp_level 6;\n\t# gzip_buffers 16 8k;\n\t# gzip_http_version 1.1;\n\t# gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;\n\n\t##\n\t# Virtual Host Configs\n\t##\n\n\tinclude /etc/nginx/conf.d/*.conf;\n\tinclude /etc/nginx/sites-enabled/*;\n}\n\n\n#mail {\n#\t# See sample authentication script at:\n#\t# http://wiki.nginx.org/ImapAuthenticateWithApachePhpScript\n#\n#\t# auth_http localhost/auth.php;\n#\t# pop3_capabilities \"TOP\" \"USER\";\n#\t# imap_capabilities \"IMAP4rev1\" \"UIDPLUS\";\n#\n#\tserver {\n#\t\tlisten     localhost:110;\n#\t\tprotocol   pop3;\n#\t\tproxy      on;\n#\t}\n#\n#\tserver {\n#\t\tlisten     localhost:143;\n#\t\tprotocol   imap;\n#\t\tproxy      on;\n#\t}\n#}\n\n# configuration file /etc/nginx/mime.types:\n\ntypes {\n    text/html                                        html htm shtml;\n    text/css                                         css;\n    text/xml                                         xml;\n    image/gif                                        gif;\n    image/jpeg                                       jpeg jpg;\n    application/javascript                           js;\n    application/atom+xml                             atom;\n    application/rss+xml                              rss;\n\n    text/mathml                                      mml;\n    text/plain                                       txt;\n    text/vnd.sun.j2me.app-descriptor                 jad;\n    text/vnd.wap.wml                                 wml;\n    text/x-component                                 htc;\n\n    image/avif                                       avif;\n    image/png                                        png;\n    image/svg+xml                                    svg svgz;\n    image/tiff                                       tif tiff;\n    image/vnd.wap.wbmp                               wbmp;\n    image/webp                                       webp;\n    image/x-icon                                     ico;\n    image/x-jng                                      jng;\n    image/x-ms-bmp                                   bmp;\n\n    font/woff                                        woff;\n    font/woff2                                       woff2;\n\n    application/java-archive"
  },
  "cron": {
    "user_crontab": "",
    "system_cron_files": [
      "certbot",
      "e2scrub_all",
      "sysstat"
    ]
  },
  "env": {
    "env_file": "/opt/niteride/.env",
    "variables": {
      "DATABASE_URL": "postgresql://postgres:xK8nP2vQm7R4wL9sT6yF3jH5bN1cV0zA@localhost:5432/niteride_db",
      "DB_HOST": "localhost",
      "DB_PORT": "5432",
      "DB_NAME": "niteride_db",
      "DB_USER": "postgres",
      "DB_PASSWORD": "[REDACTED]",
      "DATABASE_POOL_MIN": "2",
      "DATABASE_POOL_MAX": "10",
      "DATABASE_IDLE_TIMEOUT": "10000",
      "DATABASE_CONNECTION_TIMEOUT": "5000",
      "PORT": "3000",
      "NODE_ENV": "production",
      "LIBRARY_PATH": "/opt/niteride/library",
      "JWT_SECRET": "[REDACTED]",
      "JWT_EXPIRES_IN": "7d",
      "SCHEDULE_CRON": "55 23 * * *",
      "ENABLE_COMMERCIAL_BREAKS": "true",
      "ENABLE_RUNTIME_COMMERCIAL_SELECTION": "true",
      "ENABLE_FREQUENCY_CONTROLS": "true",
      "LOG_LEVEL": "info",
      "LOG_FILE": "/opt/niteride/logs/backend.log",
      "FRONTEND_URL": "https://ppe.niteride.fm",
      "CORS_ORIGIN": "https://ppe.niteride.fm,http://82.22.53.147,http://localhost:5173",
      "SUPABASE_JWT_SECRET": "[REDACTED]",
      "SUPABASE_URL": "https://wykeftshdxlkamgvytbc.supabase.co",
      "SUPABASE_ANON_KEY": "[REDACTED]",
      "SUPABASE_SERVICE_ROLE_KEY": "[REDACTED]",
      "STRIPE_SECRET_KEY": "[REDACTED]",
      "STRIPE_PUBLISHABLE_KEY": "[REDACTED]",
      "STRIPE_WEBHOOK_SECRET": "[REDACTED]",
      "STRIPE_PRICE_ID": "prod_TCbPRjHrVx5uNB",
      "UPLOAD_DIR": "/opt/niteride/uploads",
      "MAX_FILE_SIZE": "5368709120",
      "RATE_LIMIT_WINDOW_MS": "900000",
      "RATE_LIMIT_MAX_REQUESTS": "100",
      "DISABLE_STREAMING_CORE": "true",
      "SERVICE_KEY": "[REDACTED]",
      "REDIS_URL": "redis://localhost:6379",
      "GUIDE_UPSTREAM_URL": "http://82.22.53.161:3002",
      "GRID_DATABASE_URL": "postgresql://lemmy:hJFjld8TCfQvOSPHze1eD4vEnG370MXsfQmU94x6hA0@82.22.53.68:5433/lemmy"
    }
  },
  "connections": [
    {
      "from": "niteride-backend",
      "to": "postgres",
      "port": 5432,
      "type": "data"
    },
    {
      "from": "guide-service",
      "to": "postgres",
      "port": 5432,
      "type": "data"
    },
    {
      "from": "identity-service",
      "to": "postgres",
      "port": 5432,
      "type": "data"
    },
    {
      "from": "chat-service",
      "to": "postgres",
      "port": 5432,
      "type": "data"
    },
    {
      "from": "niteride-backend",
      "to": "postgres",
      "port": 5432,
      "type": "data"
    },
    {
      "from": "guide-service",
      "to": "postgres",
      "port": 5432,
      "type": "data"
    },
    {
      "from": "identity-service",
      "to": "postgres",
      "port": 5432,
      "type": "data"
    },
    {
      "from": "chat-service",
      "to": "postgres",
      "port": 5432,
      "type": "data"
    },
    {
      "from": "nginx",
      "to": "https://api-ppe.niteride.fm/ch2/",
      "port": 80,
      "type": "proxy"
    },
    {
      "from": "nginx",
      "to": "https://api-ppe.niteride.fm/ch2-segments/",
      "port": 80,
      "type": "proxy"
    },
    {
      "from": "nginx",
      "to": "https://api-ppe.niteride.fm/hls/",
      "port": 80,
      "type": "proxy"
    },
    {
      "from": "nginx",
      "to": "http://82.22.53.161:3002",
      "port": 3002,
      "type": "proxy"
    },
    {
      "from": "nginx",
      "to": "https://api-ppe.niteride.fm/hls/segments/",
      "port": 80,
      "type": "proxy"
    },
    {
      "from": "nginx",
      "to": "http://127.0.0.1:3001",
      "port": 3001,
      "type": "proxy"
    },
    {
      "from": "nginx",
      "to": "https://api-ppe.niteride.fm/uploads/",
      "port": 80,
      "type": "proxy"
    },
    {
      "from": "nginx",
      "to": "http://127.0.0.1:3105/$1",
      "port": 3105,
      "type": "proxy"
    },
    {
      "from": "nginx",
      "to": "https://api-ppe.niteride.fm",
      "port": 80,
      "type": "proxy"
    },
    {
      "from": "nginx",
      "to": "http://127.0.0.1:4000/socket.io/",
      "port": 4000,
      "type": "proxy"
    },
    {
      "from": "nginx",
      "to": "http://127.0.0.1:3000",
      "port": 3000,
      "type": "proxy"
    },
    {
      "from": "nginx",
      "to": "http://127.0.0.1:4000",
      "port": 4000,
      "type": "proxy"
    },
    {
      "from": "nginx",
      "to": "https://api-ppe.niteride.fm/ch1/",
      "port": 80,
      "type": "proxy"
    }
  ],
  "external_services": [
    {
      "name": "Supabase",
      "type": "auth/database",
      "detected_in": ".env"
    },
    {
      "name": "Stripe",
      "type": "payments",
      "detected_in": ".env"
    }
  ]
}
